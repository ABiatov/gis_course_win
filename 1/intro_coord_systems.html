<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<title>Системы координат</title>

<xmp theme="united" style="display:none;">

# Системы координат и проекции

**Выделяют**

* Локальные системы координат
* Географические системы координат
* Спроецированные (прямоугольные) системы координат

**Как различать по значениям координат**

* Локальные системы координат: от 0,0 до, например, 5000,6000
* Географические системы координат: от -180,-90, до 180,90
* Спроецированные (прямоугольные) системы координат: от -1000000,1000000 до, например, 1000000, 1000000


## Локальные системы координат

![][01-coord-01]


## Географические координаты


![][01-coord-02]

**Широта** --- угол между  плоскостью экватора и нормалью к поверхности эллипсоида в данной точке (0-90 с.ш. и ю.ш.)

**Долгота** --- угол между меридианом данной точки и начальным меридианом (0-180 з.д. и в.д.)


## Понятие геоида, эллипсоида и проеции

![][01-coord-03]


**Геоид** Форму Земли, особенно с учетом рельефа, можно описать с помощью геоида. Эта фигура является результатом сложных физических расчётов гравитационного поля Земли. Из-за неоднородного распределения массы поле оказывается разным в разных регионах, что приводит к деформации сферы. Таким образом, геоид представляет гравитационое поле Земли.

Ввиду математической сложности геоида, в качестве приближения формы Земли в географических информационных системах используется **сфера** или **эллипсоид**.

Упрощённое представление формы Земли сферой недостачно точно для создания карт масштаба крупнее 1:2~000~000. Эллипсоиды вращения или сфероиды пытаются воспроизвести сложную форму Земли насколько возможно точно математически. Поэтому расстояние от полюса до центра Земли меньше, чем от экватора.

Форма и размеры земного эллипсоида характеризуются большой **а** и малой **b**
полуосями, а чаще большой полуосью а и полярным сжатием **f**:

<center> f = (a - b) / a </center>

Существует ряд моделей эллипсоидов, дающих оптимальные результаты для разных регионов. В общем, для каждого региона можно подобрать эллипсоид, являющийся достаточно точным приближением поверхности Земли в этом регионе.




### Примеры референц-эллипсоидов



Эллипсоид, представляющий Землю | Большая полуось (м) | Малая полуось (м) | Область применения
--------------------------------|---------------------|-------------------|-------------------
WGS 1984                        | 6378137             | 6356752.314245           | Северная Америка, весь мир
Эллипсоид Крассовского          | 6378245             | 6356863.019          | Российская Федерация, страны бывшего CCCР


Существует большое количество эллипсоидов (в библиотеке 
[PROJ.4](https://trac.osgeo.org/proj/) определено
порядка 40 различных эллипсоидов):

    $ proj -le
    bessel a=6377397.155    rf=299.1528128   Bessel 1841
    clrk66 a=6378206.4      b=6356583.8      Clarke 1866
    clrk80 a=6378249.145    rf=293.4663      Clarke 1880 mod.
     intl a=6378388.0       rf=297.          International 1909 (Hayford)
    krass a=6378245.0       rf=298.3         Krassovsky, 1942
    WGS84 a=6378137.0       rf=298.257223563 WGS 84
    sphere a=6370997.0      b=6370997.0      Normal Sphere (r=6370997)
    ...



## Датум

Эллипсоид задаёт абстрактную модель конфигурации земной поверхности. Для того, чтобы можно было отсчитывать координаты точки на поверхности эллипсоида --- нужны оси координат.

**Датум** набор параметров смещения и поворота референц-эллипсоида для лучшей апроксимации земной поверхности. Также датум задаёт нулевой меридиан, от которого будет идти отсчёт долготы.

Датумы бывают

* глобальными, т.е. предназначенными для аппроксимации земной поверхности на территории всей планеты. Например, датум WGS84 базирующийся на собственном эллипсоиде.
* локальными, т.е. предназначенными для лучшей аппроксимации участка земной поверхности. Пример: <<Пулково 1942>> --- датум, основывающийся на эллипсоиде Крассовского, и предназначенный для лучшей аппроксимации территории Советского Союза.


На базе одного референц-эллипсоида может основываться несколько различных датумов. Так, многие страны восточной Европы имели собственные датумы, основанные на эллипсоиде Крассовского.

Примеры именованных датумов библиотеки PROJ.4:

    $ proj -ld
    __datum_id__ __ellipse___ __definition/comments______________________________
           WGS84 WGS84        towgs84=0,0,0                 
          GGRS87 GRS80        towgs84=-199.87,74.79,246.62  
                              Greek_Geodetic_Reference_System_1987
           NAD83 GRS80        towgs84=0,0,0                 
                              North_American_Datum_1983
           NAD27 clrk66       nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat
                              North_American_Datum_1927
         potsdam bessel       towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7
                              Potsdam Rauenberg 1950 DHDN
        carthage clark80      towgs84=-263.0,6.0,431.0      
                              Carthage 1934 Tunisia
    hermannskogel bessel       towgs84=653.0,-212.0,449.0    
                              Hermannskogel
           ire65 mod_airy     towgs84=482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15
                              Ireland 1965
          nzgd49 intl         towgs84=59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993
                              New Zealand Geodetic Datum 1949
          OSGB36 airy         towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894
                              Airy 1830




### Переход от одного датума к другому


![][01-coord-04]


**Важно:** при пересчёте данных из системы координат на одном датуме,
в систему координат на другом, необходимо знать параметры трансформации
датумов. Эти параметры определяют как относится тот или иной референц-эллипсоид
к общеземному, [подробнее](http://gis-lab.info/qa/datum-transform-sets.html).





## Три сеймейства картографических проекций


![][01-coord-05]

а) Цилиндрические
б) Конические
в) Плоскостные (азимутальные)



### Виды искажений

В ходе проецирования любая карта будет иметь искажения
* углов,
* расстояний,
* площадей.
возможны искажения одновременно нескольких параметров.

Поэтому важно подобрать проекцию карты под решаемую задачу.

###  Конформные проекции
**Равноугольная (конформная) проекция:** картографическая проекция, позволяющая передавать на картах углы без искажений и сохранять в каждой точке постоянный масштаб по всем направлениям, хотя в разных местах карты масштаб различен.

Используются для навигационных, метеорологических и др. задач, где важно сохранение углов.

Пример --- проекция Меркатора.

![][01-coord-06]


[Пазлы на Меркаторе :)](http://bramus.github.io/mercator-puzzle-redux/)

### Равнопромежуточные проекции
**Равнопромежуточная проекция:** картографическая проекция, обладающая свойством сохранения масштаба вдоль определенных линий.

Равнопромежуточные проекции обеспечивают правильные расстояния от центра проекции вдоль определенных линий. Эти проекции используются для сейсмического картографирования, а также для задач навигации.

Пример --- простая цилиндрическая проекция

![][01-coord-07]

### Равновеликие проекции
**Равновеликая проекция:** картографическая проекция, которая не искажает площадей и сохраняет на всей карте единый масштаб площадей

Площади фигур на карте пропорциональны площадям соответствующих фигур в реальности, но при этом сильны искажения углов и форм.


Пример --- равновеликая цилиндрическая проекция Мольвейде 

![][01-coord-08]


## Системы координат

После того, как поверхность земного шара или её часть спроецирована на плоскость, следует задать систему координат, чтобы точно размещать 2-~или 3-мерные участки на карте.

С помощью систем координат каждое место на Земле может быть описано набором из трех цифр, называемых координатами. Системы координат делят на
* системы географических координат;
* системы проекционных координат (также называются картезианскими, или прямоугольными).

### Географические системы координат 

Географическая система (Longitude-Latitude, lon/lat): Наиболее часто используемая система, использующая долготу, широту и высоту.

Координаты отсчитываются от нулевого меридиана и экватора. В результате, поверхность земли покрывает сетка из 180 меридианов (долгот) на запад и восток от Гринвича и 180 параллелей (широт) на север и юг от экватора.

Высота измеряется от центра Земли.

Единицы системы могут быть выражены в шестидесятеричном (градусы:минуты:секунды, буква, обозначающая направление) или десятичном (+/- градусы с десятичными знаками) исчислении.


### Системы проекционных координат 
Будут рассмотрены две распространенные системы:
* Система координат (проекция) Гаусса-Крюгера;
* Система координат (проекция) UTM (Universal Transverse Mercator)


### Система кординат Гаусса-Крюгера 
Схема построения 6-градусных зон 

![][01-coord-09]

Вся поверхность Земли делится на 6-градусные (по долготе) зоны (дольки от полюса до полюса), которые каждая отдельно разворачиваются в плоскую поверхность. Всего образуется 60 таких зон, которые нумеруются цифрами от 1 до 60.


### Зоны 
![][01-coord-10]

Зоны нумеруются с запада на восток, начиная с 0: зона 1 простирается с меридиана 0 до меридиана 6, её центральный меридиан 3. Зона 2 --- с 6 до 12, и т.д.

Цилиндр разворачивают в плоскость и накладывают прямоугольную километровую сетку. За ось OX принимают изображение осевого меридиана зоны (положительное направление --- на север), за ось OY принимают изображение экватора (положительное направление --- на восток).

### Координаты внутри зоны 
![][01-coord-11]

В каждой из шестиградусных зон своя система прямоугольных координат. Вертикальные линии сетки параллельны центральному меридиану. Для того, чтобы все прямоугольные координаты были положительны, вводится восточное смещение (false easting), равное 500~000 м, т.е. координата Y на центральном меридиане равна 500~000 м. Для определенности, чтобы только по численному значению координаты Y можно было определить, к какой зоне относятся эти значения, к ним слева приписывается номер зоны.

Пример: (X=6~177~200; Y=7~420~000) --- 7 зона, на 80 км западнее среднего меридиана зоны 7, на 6~177~200 метров севернее экватора.


### UTM 
Система координат UTM по построению похожа на систему Гаусса-Крюгера:

* делит Землю на 60 вытянутых в меридиональном направлении зон шириной 6 градусов;
* отображающая их по отдельности в равноугольной поперечно-цилиндрической проекции Меркатора.

Отличия:

* используется масштабный коэффициент, равный 0,9996.% Поэтому эта система координат сохраняет масштабы не на осевом меридиане, а на некотором расстоянии (около 180 км) от него, из-за чего максимальное искажение масштаба в пределах шестиградусной зоны у неё меньше.
* нумерация зон: первая зона та, осевой меридиан которой имеет долготу 177 з.д. % Таким образом, например, 7-я зона в системе координат Гаусса—Крюгера по географическому охвату соответствует 37-й зоне UTM.
* Ось абсцисс в данной системе координат направлена на восток, а ось ординат --- на север. Во избежание отрицательных значений координат, к значению абсциссы прибавляются 500~000~м, а к значению ординаты в южном полушарии --- 10~000~000~м

### Важно помнить 
* Всегда уточняйте в какой системе координат данные
* Убедитесь, что у слоев всегда есть файл описания проекции *.prj
* Если это таблица с координатами, уточняйте в каком они формате







[01-coord-01]: ../img/coord/local_coord.png
[01-coord-02]: ../img/coord/geo_coord.png
[01-coord-03]: ../img/coord/geoid.png
[01-coord-04]: ../img/coord/coord_transition.png
[01-coord-05]: ../img/coord/proj_fam.jpg
[01-coord-06]: ../img/coord/merkator.png
[01-coord-07]: ../img/coord/equidistant.png
[01-coord-08]: ../img/coord/mollweide.png
[01-coord-09]: ../img/coord/gauss_kruger1.png
[01-coord-10]: ../img/coord/zonesgk_l.png
[01-coord-11]: ../img/coord/gauss_kruger2.png




</xmp>
<script src="../strapdown/v/0.2/strapdown.js"></script>
</html>
