<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Системы координат и проекции</title>
</head>

<body>
<xmp theme="simplex" style="display:none;">

# Задания

## Чтение систем координат

Для каждой из проекции ниже выполните команду (заменив
проекцию на соответствующую) и объясните, что означает каждый параметр
системы координат в формате PROJ.4:

1. WGS84 (EPSG:4326)
2. Pulkovo 1942 (EPSG:4284)
3. WGS 84 / UTM zone 37N (EPSG:32637)
4. Pulkovo 1942 / Gauss-Kruger zone 7 (EPSG:28407)


    $ gdalsrsinfo EPSG:<code>

Сайты с описанием проекций в различных форматах:

* http://epsg.io/
* http://spatialreference.org/

Список проекций библиотеки PROJ.4 можно посмотреть с помощью команды:

    proj -lp

## Перепроецирование, вычисление

Есть [библиотеки для линковки и "байндинги"](https://github.com/OSGeo/proj.4/wiki),
но мы вычислим с помощью консольных утилит.

Преобразование в проекцию Меркатора на сфере и обратно (обратите внимание
на порядок координат):

    $ echo 55.997917 37.190417 | cs2cs -r +init=epsg:4326 +to +init=epsg:32637
    387141.21   6207325.45 0.00

    $ echo 4140018.28 7558001.00 | cs2cs +init=epsg:3857 +to +init=epsg:4326 -f %.6f
    37.190417   55.997917 0.000000

Преобразование в координаты Пулково 1942 года:

    $ echo 55.997917 37.190417 | cs2cs -r +init=epsg:4326 +to +init=epsg:4284 -f %.6f
    37.192311   55.997884 -4.899983

Помимо работы с проекциями библиотека PROJ.4 предоставляет возможность выполнять
прямое и обратное геодезическое преобразование. Грубо говоря, прямое
преобразованиие дает ответ на вопрос: где я окажусь, если будут вдигаться
с азимутом A из точки P расстояние L. Обратное, соответственно,
вычисляет расстояние и азимут между двумя точками.

Исользуем обратное преобразование, для того чтобы оценить разницу между
WGS84 и Pulkovo 1942:

    $ echo 55.997917 37.190417 55.997884 37.192311 | invgeod +ellps=WGS84 -f "%f" -F "%.4f"
    91.783774 -88.214656  117.9633

Первый элемент в кортеже: прямой азимут, второй - обратный, третий -
расстояние в метрах. Это как раз то расхождение в ~120 метров,
с которым сталкиваются, когда пытаются использовать данные в СК Pulkovo 1942
совместно с данными WGS84.

1. Перепроецируйте координаты Зеленограда в 37-ю зону проекции UTM.
2. Вычислить расстояние между Москвой и Санкт-Петербургом на эллипсоиде WGS84.

### Вопросы для закрепления

1. Если мои данные хранятся в WGS 1984 или Pulkovo 1942 значит ли это что они спроецированы?
2. Выбранная проекция искажает один из основных параметров (длину, угол, площадь), как провести измерения более точно?
3. При расчете площади в проекции Меркатора результат расчета отличается от реальной площади в несколько раз, почему такая ошибка??

</xmp>
<script src="../strapdown/v/0.2/strapdown.js"></script>

</body>
</html>
