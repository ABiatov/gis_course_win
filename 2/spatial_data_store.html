<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<title>Способы хранения данных</title>

<xmp theme="united" style="display:none;">


Современный подход к хранению векторных данных
----------------------------------------------

## Векторные данные
![][02-vector-format]

## Историческая справка

1. В ГИС первого поколения все пространственные данные хранились в плоских
   файлах, требовавших специального ПО ГИС для их интерпретации.
   Это ПО разрабатывалось для удовлетворения нужд пользователей, работающих
   с данными, доступными только в рамках их организации. В большинстве своём
   это проприетарное ПО, разработанное под конкретную задачу.

2. В ГИС следующего поколения отошли от принципа хранения пространственных
   данных в плоских файлах. В ГИС этого поколения отдавали
   предпочтение хранению атрибутики в реляционных
   базах данных, но геометрическая составляющая по прежнему хранилась
   в файлах или в БД в виде BLOB - объектов (Binary Large OBject).

3. В современных ГИС пришли к тому, что эффективнее хранить как атрибутику,
   так и геометрии в реляционной базе данных.

![][02-postgis-10]


## Форматы векторных данных


### Shapefile

**Особенности**

* Представлен в ArcView 2 в 1993 году
* Координаты отдельно от атрибутов
* Это не файл, а группа файлов (**.shp**, **.dbf**, **.shx**, **.prj**, ...)

**Плюсы**

* Открытый формат
* Поддерживается практически всеми универсальными ГИС
* Множество инструментов
* Множество библиотек для разработки
* Стандарт де-факто

**Недостатки**

* Однобайтовая кодировка для строк
* Название поля — 10 символов
* Длина поля — 255 байт
* Максимальный размер — не более 2 Гб
* нет возможности разграничения прав доступа;
* ограниченные возможности поддержки одновременного доступа;
* сложные запросы, состоящие из пары строк на SQL, требуют гораздо больше
  специализированного кода при работе с файлами;
* Многофайловый

**Почему популярнее альтернатив**

* Закрытость формата (FileGDB, MDB, TAB)
* Неполная документация (SXF, DWG)
* Неуниверсальность (GeoJSON)
* Слабая поддержка в «стороннем» ПО (SXF, MDB)
* Тяжеловесность (GML)
* Непризнанность форматов (SQLite/Spatialite)

**И все-таки, почему не Shape файлы**

Shape файлы (и другие файловые форматы) являются стандартным способом хранения
пространственных данных с момента появления ГИС. Однако, файловый
подход имеет ряд недостатков. В итоге, сочетание поддержки многопользовательского доступа,
сложных запросов и высокой производительности на больших наборах данных,
отличает пространственные базы данных от файловых хранилищ в лучшую
сторону.



### GeoJSON

* Структурированный текстовый формат JSON
* Несколько типов геометрий в одном файле
* Нефиксированный набор свойств

        {
             "type": "Feature",
             "geometry": {
                 "type": "LineString",
                 "coordinates": [[30,10], [10,30], [40,40]]
             },
             "properties": {}
        }

### SQLite/Spatialite

* Компактная встраиваемая реляционная база данных
* Один файл, в котором хранятся все данные
* Собственная реализация индексов (R-деревья)

### GML (Geography Markup Language)

* Язык разметки для описания пространственных объектов (XML)
* Только 2D геометрии

### KML (Keyhole Markup Language)

* Расширение GML от Google
* Добавляет описание стилей
* Добавляет описание 3D моделей

### GeoPackage

* Долгожданное избавление от ESRI Shapefile?
* Стандарт OGC, опубликован 12.02.2014
* Формат базы данных SQLite
* Может хранить ещё и растровые данные (тайловые пирамиды аля MBtiles)
* Геометрия в формате WKB
* Несколько слоёв в одном файле
* Расширяемый (Пользовательские типы геометрий, дополнительные функции SQL, ...)

Подробнее в нашей [презентации](http://gisconf.ru/pres/1_21_1440_nikulin.pdf).



Растровые данные
----------------

Традиционный способ хранения растровых данных - файлы. И хотя существуют
СУБД, поддерживающие хранение растровых данных ([PostGIS Raster](http://trac.osgeo.org/postgis/wiki/WKTRaster)),
широкого распространения они пока не получили.

[02-postgis-10]: ../img/formats/02-postgis-10.png
[02-vector-format]: ../img/formats/vector-01.png

</xmp>
<script src="../strapdown/v/0.1/strapdown.js"></script>
</html>
