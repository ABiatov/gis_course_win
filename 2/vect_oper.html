<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<title></title>

<xmp theme="united" style="display:none;">

Работа с векторными данными в QGIS
----------------------------------

## Импорт векторных данных из текстового формата 

Текстовый файл с разделителями.

* Текстовый файл с колонками, содержащими координаты (только точки).
* Текстовый файл с колонкой, содержащей описание геометрии в формате OGC:
        Point(координатаX координатаY)
        LineString(координатаX1 координатаY1, координатаX2 координатаY2, ...)
        Polygon(координатаX1 координатаY1, координатаX2 координатаY2, ..., координатаX1 координатаY1)

## Работа с атрибутами 
Слой -> Таблица атрибутов

Сортировка, фильтрация, работа с выделением (создание, сохранить как слой, показать на карте и т.п.), ...


### Конструктор поисковых запросов 

Таблица атрибутов -> Выделить объекты, удовлетворяющие условиям.

Примеры запросов для слоя OSM <<точки интереса (туризм)>>:

*  "AMENITY" = 'fuel'
*  "NAME" = 'Успенско-Богородицкая церковь'
*  "NAME" like 'Кафе%' ("NAME" like '%Кафе%',  "NAME" ilike '%Кафе%')
*  "OSM\_ID" < 300000000
*  "NAME" ilike '%нефть%' AND ("AMENITY" <> 'fuel')

### Калькулятор полей 
Таблица атрибутов -> открыть калькулятор полей.

* Операторы. Арифметические действия. Пример: расчет плотности населения внутри полигона.
* Условия. Пример:
        CASE WHEN "AMENITY" = 'fuel' THEN 'Заправка'
        ELSE 'Не-пойми-что'
        END

* Функции. Математические функции.
* Преобразования. Конвертация типов.
* Строки. Функции обработки строк (concat: склеивание, substr: извлечения подстроки, replace замена подстроки).
* Геометрия. Использование в обработке геометрических характеристик (Примеры: $area, $perimeter,  geomToWKT($geometry)). Не забывать о проекции!


## Обработка геометрии 

### Анализ 

* Матрица расстояний. Рассчитываются расстояния между точками.
* Сумма расстояний в полигонах. Рассчитываются длины линий, лежащих внутри полигона.
* Количество точек в полигонах. Рассчитывается количество точек, попавших в полигон.
* Список уникальных значений.
* Базовая статистика.
* Анализ близости. Статистика по близости точек.
* Средние координаты. Средние координаты объекта.
* Пересечение линий. Построение точечного слоя в местах пересечений линий.

### Выборка 

* Случайная выборка и Выборка в подмножествах: случайный выбор объектов из таблицы.
* Случайные точки: построение точечного слоя из случайно выбранных точек.
* Регулярные точки: построение точечного слоя в виде сетки.
* Регулярная сетка: построение линейного или полигонального слоя в виде сетки.
* Полигон из границ слоя (охват).


#### Пространственная выборка

Модуль «Пространственные запросы» позволяет выполнять пространственные запросы (выделять объекты) к объектам целевого слоя по отношению к объектам другого слоя. 
Поддерживаются следующие операторы:

* Содержит (Contains): второй объект полностью находится внутри первого.
* Совпадает (Equals): один объект полностью идентичен второму объекту.
* Накладывается (Overlap): у объектов есть общие части, но ни один объект не располагается целиком внутри второго. 
* Пересекает кривой (Crosses): как и в предыдущем случае, объекты имеют общие части, но размерность этих частей меньше, чем размерность исходных объектов.
* Пересекает (Intersects): у объектов есть хотя бы одна общая точка.
* Не пересекает (Is disjoint): у объектов нет ни одной общей точки.
* Касается (Touches): у объекты касаются границами, но не заходят один внутрь другого.
* Находится внутри (Within): аналогично Contains, но в обратном направлении – первый объект полностью лежит внутри второго.



### Геообработка 

* Выпуклые оболочки: создание полигона, охватывающего выбранные объекты.
* Буферные зоны: построение полигонов вокруг выбранных объектов, границы которых отступают на заданное расстояние.
* Пересечение, симметрическая разность, отсечение, разность.
* Объединение: строится слой из пересекающихся объектов указанных слоев, атрибуты объектов объединяются в новой таблице.
* Объединение по признаку: объекты с одинаковыми атрибутами объединяются в один объект.
* Удалить осколочные полигоны: чистятся мелкие <<зазоры>> между полигонами.

### Обработка геометрии 

* Проверка геометрии.
* Экспортировать/добавить поле геометрии.
* Центроиды полигонов.
* Триангуляция Делоне, полигоны Вороного.
* Упростить геометрию.
* Добавить вершины.
* Разбить составную геометрию.
* Объединить геометрию в составную.
* Преобразовать полигоны в линии.
* Преобразовать линии в полигоны.
* Извлечение узлов.


### Управление данными 

* Задать текущую проекцию.
* Объединение атрибутов по районам:
* Разбить векторный слой: деление слоя на несколько отдельных слоев по указанному атрибуту.
* Объединение shape-файлов: объединяет слои одинакового типа (точки, линии, полигоны) в один слой.
* Создать пространственный индекс.




</xmp>
<script src="../strapdown/v/0.1/strapdown.js"></script>
</html>
